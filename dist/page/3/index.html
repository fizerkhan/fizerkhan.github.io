<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/png" href="/images/cabin.png">
    <link href="/styles/main.css" rel="stylesheet">
    <title>Fizer Khan Blog</title>
  </head>
  <body>
    <nav id="nav">
      <h1 class="name"><a href="/">Fizer Khan</a></h1>
      <ul class="nav-links">
        <li class="menu icon-menu"></li>
        <li class="text-link"><a href="/about.html">About</a></li>
        <li class="text-link"><a href="/archives.html">Archives</a></li>
      </ul>
      <div class="social-media"><a href="https://github.com/fizerkhan" class="icon-github"></a><a href="https://twitter.com/fizerkhan" class="icon-twitter"></a><a href="http://facebook.com/fizerface" class="icon-facebook"></a></div>
    </nav>
    <div class="content">
      <div class="post-head group"><a href="/blog/posts/Script-Tag-XSS-attack.html">
          <h1 class="post-title">Script Tag XSS attack</h1></a>
        <h2 class="post-date">2013 &#183; 8 &#183; 1</h2>
      </div>
      <div class="post-body"><p>I heard lot about cross site scripting(XSS) and recommendation to escape the string before placing in to HTML. I rarely seen any good example to prove it until i got the following code.</p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="err">&quot;</span><span class="nt">&lt;/script&gt;&lt;script&gt;</span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;I am not a string. I am a Javascript&#39;</span><span class="p">);</span><span class="nt">&lt;/script&gt;</span>&quot;;
<span class="nt">&lt;/script&gt;</span>
</pre></div>
</code></pre>
<p>You can run <a href="http://jsfiddle.net/fizerkhan/yxXvV/1/">this fiddle</a>.</p>
<p>The reason behind is that always HTML is parsed and render tree before the Javascript execution. The HTML parser does not have any knowledge about javascipt expression(like <code>var info</code>). It considers <code>script</code> inside a <code>info</code> string as script node. Then alert becomes normal JavaScript expression.</p>
<p>In current days, we uses lot server side template engine like Jade, ERB, Handlebars and etc. When you uses them, you make sure that the strings are escaped properly.</p>
<p>Secure your code and Have a nice day.</p>
</div>
      <h4><a href="/blog/posts/Script-Tag-XSS-attack.html#comments">View comments</a></h4>
      <div class="post-head group"><a href="/blog/posts/Use-your-browser-as-Notepad.html">
          <h1 class="post-title">Use your browser as Notepad</h1></a>
        <h2 class="post-date">2013 &#183; 7 &#183; 8</h2>
      </div>
      <div class="post-body"><p>We all uses notepad or sticky note or some editor to take immediate notes on something like code snippet, ideas, blog content, todo. Recently i came to know that we can use our browser just like notepad. The trick hacks around <a href="http://en.wikipedia.org/wiki/Data_URI_scheme">Data URI scheme</a> and html <a href="http://www.w3schools.com/tags/att_global_contenteditable.asp">contenteditable</a> attribute.</p>
<p>All you need to do is type the following code into the browser&#39;s URL bar:</p>
<pre><code><div class="highlight"><pre><span class="nx">data</span><span class="o">:</span><span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">html</span> <span class="nx">contenteditable</span><span class="o">&gt;</span>
</pre></div>
</code></pre>
<p>It will make your page as editable just like notepad. If you want to save your content, do the usual browser save(<strong>CMD+S</strong> for OSX). It will save your content as html file. You can also bookmark above data url to make it easier.</p>
<p>After i share this post in <a href="https://news.ycombinator.com/item?id=6005295">Hacker News</a>, i got cool new things from cool guys.</p>
<p>Editor with little bit styles by <a href="https://news.ycombinator.com/user?id=bichiliad">bichiliad</a></p>
<pre><code><div class="highlight"><pre><span class="nx">data</span><span class="o">:</span><span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">html</span> <span class="nx">contenteditable</span><span class="o">&gt;&lt;</span><span class="nx">style</span><span class="o">&gt;</span><span class="nx">body</span> <span class="p">{</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">333</span><span class="p">;</span> <span class="nx">width</span><span class="o">:</span> <span class="mi">960</span><span class="nx">px</span><span class="p">;</span> <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span> <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span> <span class="nx">height</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span> <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">36</span><span class="nx">px</span><span class="p">;</span> <span class="nx">padding</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;}</span><span class="o">&lt;</span><span class="err">/style&gt;&lt;/html&gt;</span>
<span class="nx">reply</span>
</pre></div>
</code></pre>
<p>Theme that changes the background color as you type by <a href="https://coderwall.com/bgrins">bgrins</a></p>
<pre><code><div class="highlight"><pre><span class="nx">data</span><span class="o">:</span><span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;&lt;</span><span class="nx">head</span><span class="o">&gt;&lt;</span><span class="nx">link</span> <span class="nx">href</span><span class="o">=</span><span class="s1">&#39;http://fonts.googleapis.com/css?family=Open+Sans&#39;</span> <span class="nx">rel</span><span class="o">=</span><span class="s1">&#39;stylesheet&#39;</span> <span class="nx">type</span><span class="o">=</span><span class="s1">&#39;text/css&#39;</span><span class="o">&gt;&lt;</span><span class="nx">style</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/css&quot;</span><span class="o">&gt;</span> <span class="nx">html</span> <span class="p">{</span> <span class="nx">font</span><span class="o">-</span><span class="nx">family</span><span class="o">:</span> <span class="s2">&quot;Open Sans&quot;</span> <span class="p">}</span> <span class="o">*</span> <span class="p">{</span> <span class="o">-</span><span class="nx">webkit</span><span class="o">-</span><span class="nx">transition</span><span class="o">:</span> <span class="nx">all</span> <span class="nx">linear</span> <span class="mi">1</span><span class="nx">s</span><span class="p">;</span> <span class="p">}</span><span class="o">&lt;</span><span class="err">/style&gt;&lt;script&gt;window.onload=function(){var e=false;var t=0;setInterval(function(){if(!e){t=Math.round(Math.max(0,t-Math.max(t/3,1)))}var n=(255-t*2).toString(16);document.body.style.backgroundColor=&quot;#ff&quot;+n+&quot;&quot;+n},1e3);var n=null;document.onkeydown=function(){t=Math.min(128,t+2);e=true;clearTimeout(n);n=setTimeout(function(){e=false},1500)}}&lt;/script&gt;&lt;/head&gt;&lt;body contenteditable style=&quot;font-size:2rem;line-height:1.4;max-width:60rem;margin:0 auto;padding:4rem;&quot;&gt;</span>
</pre></div>
</code></pre>
<p>I love this. Sublime Text Flavor with Ace by <a href="https://news.ycombinator.com/user?id=thinkxl">thinkxl</a></p>
<pre><code><div class="highlight"><pre><span class="nx">data</span><span class="o">:</span><span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span><span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">DoJS</span><span class="o">&lt;</span><span class="err">/title&gt;&lt;style type=&quot;text/css&quot;&gt;#e{font-size: 16px; position:absolute;top:0;right:0;bottom:0;left:0;}&lt;/style&gt;&lt;div id=&quot;e&quot;&gt;&lt;/div&gt;&lt;script src=&quot;http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;script&gt;var e=ace.edit(&quot;e&quot;);e.setTheme(&quot;ace/theme/monokai&quot;);e.getSession().setMode(&quot;ace/mode/javascript&quot;);&lt;/script&gt;</span>
</pre></div>
</code></pre>
<p>Web is awesome. Have a nice day.</p>
</div>
      <h4><a href="/blog/posts/Use-your-browser-as-Notepad.html#comments">View comments</a></h4>
      <div class="post-head group"><a href="/blog/posts/MongoDB-tips.html">
          <h1 class="post-title">MongoDB tips</h1></a>
        <h2 class="post-date">2013 &#183; 7 &#183; 2</h2>
      </div>
      <div class="post-body"><p><a href="http://www.mongodb.org/">MongoDB</a> becomes more popular among the developers because of its schemaless nature which give more flexibility. We can store any kind of data  without having to worry about the structure of the data.</p>
<p>For few operations, i went through lot of searches to get the correct solutions. Some of them are</p>
<ol>
<li>Renaming a field name</li>
<li>Change type of field value</li>
<li>Finding document if the field exists</li>
<li>Sucking MongoDB console</li>
</ol>
<p>Lets assume that you have a MongoDB collection <code>bookmarks</code> for Bookmarking application</p>
<pre><code><div class="highlight"><pre><span class="p">{</span>
  <span class="s1">&#39;name&#39;</span> <span class="o">:</span> <span class="s1">&#39;DIVE INTO HTML5&#39;</span><span class="p">,</span>
  <span class="s1">&#39;url&#39;</span> <span class="o">:</span> <span class="s1">&#39;http://diveintohtml5.info/index.html&#39;</span><span class="p">,</span>
  <span class="s1">&#39;author&#39;</span><span class="o">:</span> <span class="s1">&#39;MARK PILGRIM&#39;</span><span class="p">,</span>
  <span class="s1">&#39;upvote&#39;</span><span class="o">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span>
  <span class="s1">&#39;created_at&#39;</span><span class="o">:</span> <span class="s2">&quot;2013-07-02 00:00:00&quot;</span>
<span class="p">}</span>
</pre></div>
</code></pre>
<a name="renaming-a-field-name" class="anchor" href="#renaming-a-field-name"><h3>Renaming a field name</h3>
</a><p>Let&#39;s say you want to rename a <code>name</code> filed to <code>title</code>, then</p>
<pre><code><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bookmarks</span><span class="p">.</span><span class="nx">update</span><span class="p">({},</span> <span class="p">{</span> <span class="nx">$rename</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;title&quot;</span><span class="p">}},</span> <span class="p">{</span> <span class="nx">multi</span> <span class="o">:</span> <span class="kc">true</span><span class="p">})</span>
</pre></div>
</code></pre>
<p>In above command, the option <code>multi</code> is important. Otherwise it will update only one document.</p>
<a name="change-type-of-field-value" class="anchor" href="#change-type-of-field-value"><h3>Change type of field value</h3>
</a><p>If you want to change type of <code>upvote</code> field from <code>string</code> to <code>number</code> value, then</p>
<pre><code><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bookmarks</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">bookmark</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">bookmark</span><span class="p">.</span><span class="nx">upvote</span> <span class="o">=</span> <span class="o">+</span><span class="p">(</span><span class="nx">bookmark</span><span class="p">.</span><span class="nx">upvote</span><span class="p">);</span>  <span class="c1">// equivalent to parseInt</span>
  <span class="nx">db</span><span class="p">.</span><span class="nx">bookmarks</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">bookmark</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<a name="finding-the-document-if-the-field-exists" class="anchor" href="#finding-the-document-if-the-field-exists"><h3>Finding the document if the field exists</h3>
</a><p> Some scenarios, you might want to find the document which has a specific fields.
 Lets say, get bookmarks which has <code>tags</code> field.</p>
<pre><code><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bookmarks</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="nx">tags</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">$exists</span> <span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">});</span>
</pre></div>
</code></pre>
<p>If the value of field is <code>null</code>, then the field is considered as Not exist.</p>
<a name="sucking-mongodb-console" class="anchor" href="#sucking-mongodb-console"><h3>Sucking MongoDB console</h3>
</a><p>MongoDB console sucks. I got frustrated  whenever i work with MongoDB console. I desperately need JSON pretty for console output, and some more useful commands. Then I found the <a href="https://github.com/TylerBrock/mongo-hacker">Mongo-hacker</a>  by
<a href="https://github.com/TylerBrock">TylerBrock</a>(Thanks bro). It is awesome and you must give a try.</p>
<p>Let me know if anything you got useful. Have a nice day.</p>
</div>
      <h4><a href="/blog/posts/MongoDB-tips.html#comments">View comments</a></h4>
      <ul class="pagination group">
        <li><a href="/">1</a>
        </li>
        <li><a href="/page/1/">2</a>
        </li>
        <li><a href="/page/2/">3</a>
        </li>
        <li><a href="/page/3/" class="active-page">4</a>
        </li>
        <li><a href="/page/4/">5</a>
        </li>
        <li><a href="/page/5/">6</a>
        </li>
      </ul>
    </div><a href="http://fizerkhan.com/"><img src="/images/cabin.png" class="cabin"></a>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="/scripts/main.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-41972683-1', 'fizerkhan.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>